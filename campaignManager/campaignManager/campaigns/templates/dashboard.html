{% extends 'campaigns_base.html' %}

{% block title %}{{ page_title }}{% endblock %}

{% block main %}

<h1>{{ page_title }}</h1>

<div class="row">
    <div class=" col-xs-12 col-md-4">
        <div class='panel panel-default'>
            <div class="panel-heading">Current Performance</div>
            <ul>
                <li>Campaign Points: {{ cp.cp }}</li>
                <li>Victory Points: {{cp.vp }}</li>
                <li>Wins: {{ cp.win }}</li>
                <li>Ties: {{ cp.tie }}</li>
                <li>Losses: {{ cp.loss }}</li>
                <li>Total Matches: {{ cp.matches }}</li>
            </ul>
        </div>
    </div>
    
    <div class=" col-xs-12 col-sm-6 col-md-4">
        <div class='panel panel-default'>
            <div class='panel-heading'>Received Challenges</div>
            <table class='table table-striped table-hover'>
                <thead>
                    <tr>
                        <th>Status</th>
                        <th>General</th>
                        <th>Turn</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for challenge in cp.challenges_received %}
                    <tr>
                        <td>
                            {{ challenge.get_status_display }}
                        </td>
                        <td>{{ challenge.recipient }}</td>
                        <td>{{ challenge.turn }}</td>
                        <td>
                            {% if challenge.status == challenge.STATUS_PENDING %}
                                <a href="{% url 'turns:challenge_accept' challenge.uuid %}">
                                    Accept
                                </a>
                            {% elif challenge.status == challenge.STATUS_ACCEPTED %}
                                <a href="{% url 'turns:challenge_resolve' challenge.uuid 'win' %}" class="btn btn-success">
                                    I Won
                                </a>
                                <a href="{% url 'turns:challenge_resolve' challenge.uuid 'loss' %}" class="btn btn-danger">
                                    I Lost
                                </a> 
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class=" col-xs-12 col-sm-6 col-md-4">
    <div class='panel panel-default'>
        <div class='panel-heading'>Issued Challenges</div>
            <table class='table table-striped table-hover'>
                <thead>
                    <tr>
                        <th>Status</th>
                        <th>General</th>
                        <th>Turn</th>
                    </tr>
                </thead>
                <tbody>
                    {% for challenge in cp.challenges_sent %}
                    <tr>
                        <td>{{ challenge.get_status_display }}</td>
                        <td>{{ challenge.recipient }}</td>
                        <td>{{ challenge.turn }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

{% endblock %}